import{u as y,a as _,r as m,w as k,c as i,b as v,d as p,o as d,e,f as x,v as g,t as f,g as $,h as E,i as C,F as h,j as M}from"./index-D09Yi_mC.js";const V={key:0,class:"fixed px-[10px] inset-0 backdrop-blur-[10px] bg-gray-900/60 text-white flex justify-center items-center z-50"},j={class:"bg-gray-900 border-2 border-gray-700 rounded-lg p-6 shadow-lg w-96 relative"},S={class:"relative z-0 w-full group mb-[40px]"},z={class:"relative z-0 w-full group mb-[40px]"},A={class:"text-sm mb-3 text-center text-green-400"},T={class:"flex justify-end gap-[30px]"},q={key:1,class:"w-full text-white bg-[#8a572e7e] focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center"},N={__name:"EditUser",setup(w){const b=y(),l=_(),r=m(""),a=m(""),s=m(""),o=m(!1),u=m("");k(()=>l.selectedUser,c=>{c&&(r.value=c.username||"",a.value=c.email||"",s.value=c.birthdate||"")},{immediate:!0});const U=async()=>{if(!l.selectedUser)return;o.value=!0;const c=l.selectedUser.id,t={username:r.value,email:a.value,birthdate:s.value};try{await b.updateUser(c,t),u.value="Utilisateur mis à jour avec succès !",l.closeEditUserModal()}catch(n){console.error(n),u.value="Erreur lors de la mise à jour."}finally{o.value=!1}};return(c,t)=>p(l).isEditUserModalVisible?(d(),i("div",V,[e("div",j,[t[7]||(t[7]=e("h2",{class:"text-xl font-bold mb-4 text-center"},"Modifier l’utilisateur",-1)),e("div",S,[x(e("input",{"onUpdate:modelValue":t[0]||(t[0]=n=>r.value=n),maxlength:"20",type:"test",name:"floating_text",id:"floating_text",class:"block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-[#8a572e] focus:outline-none focus:ring-0 peer",placeholder:" ",required:""},null,512),[[g,r.value]]),t[4]||(t[4]=e("label",{for:"floating_email",class:"peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-[#8a572e] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Username ",-1))]),e("div",z,[x(e("input",{"onUpdate:modelValue":t[1]||(t[1]=n=>a.value=n),maxlength:"120",type:"email",name:"floating_email",id:"floating_email",class:"block py-2.5 px-0 w-full text-sm bg-transparent border-0 border-b-2 appearance-none text-white border-gray-600 focus:border-[#8a572e] focus:outline-none focus:ring-0 peer",placeholder:" ",required:""},null,512),[[g,a.value]]),t[5]||(t[5]=e("label",{for:"floating_email",class:"peer-focus:font-medium absolute text-sm text-gray-400 duration-300 transform -translate-y-6 scale-75 top-3 -z-10 origin-[0] peer-focus:start-0 rtl:peer-focus:translate-x-1/4 rtl:peer-focus:left-auto peer-focus:text-[#8a572e] peer-placeholder-shown:scale-100 peer-placeholder-shown:translate-y-0 peer-focus:scale-75 peer-focus:-translate-y-6"},"Email address",-1))]),e("div",null,[x(e("input",{"onUpdate:modelValue":t[2]||(t[2]=n=>s.value=n),type:"date",name:"date",id:"date",value:"02-25-2008",class:"border mb-[40px] text-sm rounded-lg focus:ring-[#8a572e7e] focus:border-blue-500 block w-full p-2.5 bg-[#ac602217] border-gray-500 placeholder-gray-400 text-white",required:""},null,512),[[g,s.value]])]),e("p",A,f(u.value),1),e("div",T,[e("button",{onClick:t[3]||(t[3]=n=>p(l).closeEditUserModal()),class:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-500"}," Fermer "),t[6]||(t[6]=$("y ",-1)),r.value.trim()!==""&&a.value.trim()!==""&&s.value.trim()!==""?(d(),i("button",{key:0,onClick:U,type:"submit",class:"w-full text-white bg-[#a54c03] hover:bg-[#966a46] focus:ring-4 focus:outline-none font-medium rounded-lg text-sm px-5 py-2.5 text-center"}," Mettre à jour ")):(d(),i("button",q," Mettre à jour "))])])])):v("",!0)}},B={class:"ml-[200px] mt-[70px] p-6 bg-white rounded-lg shadow-md"},D={class:"w-full text-left border-collapse"},F={class:"p-3"},L={class:"p-3"},I={class:"p-3"},P={class:"p-3 text-center"},G={class:"p-3 text-center"},H=["onClick"],J=["onClick"],K=["onClick"],O=["onClick"],R={__name:"UsersTable",setup(w){const b=_(),l=a=>{b.openEditUserModal(a)},r=y();return E(r.fetchUsers),(a,s)=>(d(),i(h,null,[C(N),e("div",B,[s[3]||(s[3]=e("h2",{class:"text-2xl font-bold mb-4"},"Users List",-1)),e("table",D,[s[2]||(s[2]=e("thead",null,[e("tr",{class:"bg-gray-100 border-b"},[e("th",{class:"p-3"},"ID"),e("th",{class:"p-3"},"Username"),e("th",{class:"p-3"},"Email"),e("th",{class:"p-3"},"Admin"),e("th",{class:"p-3 text-center"},"Actions")])],-1)),e("tbody",null,[(d(!0),i(h,null,M(p(r).users,o=>(d(),i("tr",{key:o.id,class:"border-b hover:bg-gray-50"},[e("td",F,f(o.id),1),e("td",L,f(o.username),1),e("td",I,f(o.email),1),e("td",P,f(o.is_admin?"✅":"❌"),1),e("td",G,[e("button",{onClick:u=>p(r).deleteUser(o.id),class:"text-red-500 hover:underline cursor-pointer"},[...s[0]||(s[0]=[e("i",{class:"fa-solid fa-trash"},null,-1)])],8,H),o.is_admin?v("",!0):(d(),i("button",{key:0,onClick:u=>p(r).promoteToAdmin(o.id),class:"text-blue-500 ml-3 hover:underline cursor-pointer"}," Promote ",8,J)),o.is_admin?(d(),i("button",{key:1,onClick:u=>p(r).depromoteToAdmin(o.id),class:"text-blue-500 ml-3 hover:underline cursor-pointer"}," Unpromote ",8,K)):v("",!0),e("button",{onClick:u=>l(o),class:"text-blue-500 ml-3 hover:underline cursor-pointer"},[...s[1]||(s[1]=[e("i",{class:"fa-solid fa-pen-to-square"},null,-1)])],8,O)])]))),128))])])])],64))}};export{R as default};
